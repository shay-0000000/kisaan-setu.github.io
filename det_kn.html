<!DOCTYPE html>
<html lang="kn">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡≤ï‡≤ø‡≤∏‡≤æ‡≤®‡≥ç ‡≤∏‡≥á‡≤§‡≥Å - ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤∞‡≥ã‡≤ó ‡≤™‡≤§‡≥ç‡≤§‡≥Ü ‡≤π‡≤ö‡≥ç‡≤ö‡≥Å‡≤µ ‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≥Ü</title>
    <style>
        :root {
            --primary: #1b5e20;
            --secondary: #4caf50;
            --bg: #f4f7f4;
            --card: #ffffff;
            --weather: #0288d1;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: var(--bg);
            color: #333;
            margin: 0;
            padding: 15px;
        }

        .app-container {
            max-width: 850px;
            margin: auto;
            background: var(--card);
            border-radius: 15px;
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1);
            overflow: hidden;
        }

        header {
            background: var(--primary);
            color: white;
            padding: 25px;
            text-align: center;
        }

        .form-section {
            padding: 20px;
        }

        .subheading {
            font-size: 1.2rem;
            font-weight: bold;
            color: var(--primary);
            margin: 25px 0 10px;
            border-bottom: 2px solid #ddd;
            padding-bottom: 5px;
        }

        .loc-weather-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            margin-bottom: 15px;
        }

        .panel {
            padding: 15px;
            border-radius: 10px;
            border: 1px solid #ccc;
            text-align: center;
        }

        .gps-panel {
            background: #e8f5e9;
        }

        .weather-panel {
            background: #e1f5fe;
            color: var(--weather);
        }

        .btn {
            width: 100%;
            padding: 14px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: bold;
            transition: 0.2s;
        }

        .btn-gps {
            background: var(--primary);
            color: white;
        }

        .btn-diag {
            background: var(--primary);
            color: white;
            font-size: 1.3rem;
            margin-top: 25px;
            box-shadow: 0 4px 10px rgba(27, 94, 32, 0.3);
        }

        .symptoms-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: 10px;
        }

        .symp-item {
            display: flex;
            align-items: center;
            background: #fff;
            border: 1px solid #eee;
            padding: 12px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 0.95rem;
        }

        .symp-item input {
            margin-right: 12px;
            width: 20px;
            height: 20px;
            accent-color: var(--primary);
        }

        #result {
            margin-top: 30px;
            display: none;
            padding: 25px;
            border-radius: 12px;
            border: 3px solid var(--primary);
            background: #fff;
        }

        .advice-box {
            background: #fff9c4;
            padding: 15px;
            border-radius: 8px;
            margin-top: 15px;
            border-left: 5px solid #fbc02d;
        }

        @media (max-width: 600px) {

            .loc-weather-container,
            .symptoms-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>

<body>

    <div class="app-container">
        <header>
            <h1>üåæ ‡≤ï‡≤ø‡≤∏‡≤æ‡≤®‡≥ç ‡≤∏‡≥á‡≤§‡≥Å</h1>
            <p>‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤∞‡≥ã‡≤ó ‡≤®‡≤ø‡≤∞‡≥ç‡≤£‡≤Ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤ï‡≤æ‡≤≤‡≥ã‡≤ö‡≤ø‡≤§ ‡≤∏‡≤≤‡≤π‡≤æ ‡≤ï‡≥á‡≤Ç‡≤¶‡≥ç‡≤∞</p>
        </header>

        <div class="form-section">
            <div class="subheading">‡≤π‡≤Ç‡≤§ 1: ‡≤∏‡≥ç‡≤•‡≤≥ ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤®</div>
            <div class="loc-weather-container">
                <div class="panel gps-panel">
                    <button class="btn btn-gps" onclick="getLocationData()">üìç ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤∏‡≥ç‡≤•‡≤≥‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤π‡≤ö‡≥ç‡≤ö‡≤ø</button>
                    <div id="cityTxt" style="margin-top:10px; font-weight:bold;">‡≤∏‡≥ç‡≤•‡≤≥: ‡≤®‡≤ø‡≤ó‡≤¶‡≤ø‡≤™‡≤°‡≤ø‡≤∏‡≤ø‡≤≤‡≥ç‡≤≤</div>
                </div>
                <div class="panel weather-panel">
                    <div style="font-size:0.8rem; font-weight:bold;">‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤®</div>
                    <div id="tempTxt" style="font-size:1.4rem; font-weight:bold; margin-top:5px;">--¬∞C</div>
                    <div id="condTxt">--</div>
                </div>
            </div>

            <div class="subheading">‡≤π‡≤Ç‡≤§ 2: ‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤∞‡≤ø‡≤∏‡≤ø</div>
            <select id="cropSelect"
                style="width:100%; padding:15px; border-radius:8px; border:1px solid #ccc; font-size: 1rem;">
                <option value="rice">‡≤≠‡≤§‡≥ç‡≤§ (‡≤Ö‡≤ï‡≥ç‡≤ï‡≤ø)</option>
                <option value="wheat">‡≤ó‡≥ã‡≤ß‡≤ø</option>
                <option value="maize">‡≤Æ‡≥Ü‡≤ï‡≥ç‡≤ï‡≥Ü‡≤ú‡≥ã‡≤≥</option>
                <option value="potato">‡≤Ü‡≤≤‡≥Ç‡≤ó‡≤°‡≥ç‡≤°‡≥Ü</option>
                <option value="tomato">‡≤ü‡≥ä‡≤Æ‡≥ç‡≤Ø‡≤æ‡≤ü‡≥ã</option>
                <option value="cotton">‡≤π‡≤§‡≥ç‡≤§‡≤ø</option>
            </select>

            <div class="subheading">‡≤π‡≤Ç‡≤§ 3: ‡≤¨‡≥Ü‡≤≥‡≥Ü‡≤Ø ‡≤≤‡≤ï‡≥ç‡≤∑‡≤£‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤∞‡≤ø‡≤∏‡≤ø</div>
            <div id="sympGrid" class="symptoms-grid"></div>

            <button class="btn btn-diag" onclick="runDiagnosis()">üîç ‡≤¨‡≥Ü‡≤≥‡≥Ü ‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø ‡≤§‡≤™‡≤æ‡≤∏‡≤£‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø</button>

            <div id="result">
                <h2 id="resTitle" style="margin-top:0; color:var(--primary); font-size: 1.5rem;"></h2>
                <p id="resMeta" style="font-style:italic; color:#666;"></p>
                <hr>
                <strong>‚úÖ ‡≤∂‡≤ø‡≤´‡≤æ‡≤∞‡≤∏‡≥Å ‡≤Æ‡≤æ‡≤°‡≤ø‡≤¶ ‡≤™‡≤∞‡≤ø‡≤π‡≤æ‡≤∞‡≤ó‡≤≥‡≥Å:</strong>
                <ul id="resSols" style="line-height: 1.6; margin-top: 10px;"></ul>
                <div class="advice-box">
                    <strong>üí° ‡≤ï‡≤æ‡≤≤‡≥ã‡≤ö‡≤ø‡≤§ ‡≤∏‡≤≤‡≤π‡≥Ü:</strong>
                    <p id="resAdv" style="margin-top: 5px;"></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const symptomsList = [
            "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤π‡≤≥‡≤¶‡≤ø‡≤Ø‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≤Ç‡≤¶‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤ï‡≤™‡≥ç‡≤™‡≥Å ‡≤ö‡≥Å‡≤ï‡≥ç‡≤ï‡≥Ü‡≤ó‡≤≥‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤¨‡≤ø‡≤≥‡≤ø ‡≤™‡≥Å‡≤°‡≤ø ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤∂‡≤ø‡≤≤‡≥Ä‡≤Ç‡≤ß‡≥ç‡≤∞",
            "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤Æ‡≥Å‡≤¶‡≥Å‡≤°‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤∏‡≥Å‡≤∞‡≥Å‡≤≥‡≤ø‡≤Ø‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤§‡≥Å‡≤¶‡≤ø ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤Ö‡≤Ç‡≤ö‡≥Å ‡≤í‡≤£‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤∏‡≤Ç‡≤™‡≥Ç‡≤∞‡≥ç‡≤£ ‡≤ó‡≤ø‡≤° ‡≤¨‡≤æ‡≤°‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å",
            "‡≤¨‡≥Ü‡≤≥‡≤µ‡≤£‡≤ø‡≤ó‡≥Ü ‡≤ï‡≥Å‡≤Ç‡≤†‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤ï‡≥ä‡≤≥‡≥Ü‡≤§ ‡≤π‡≤£‡≥ç‡≤£‡≥Å‡≤ó‡≤≥‡≥Å / ‡≤ß‡≤æ‡≤®‡≥ç‡≤Ø‡≤ó‡≤≥‡≥Å / ‡≤ï‡≤æ‡≤Ø‡≤ø‡≤ó‡≤≥‡≥Å / ‡≤ó‡≥Ü‡≤°‡≥ç‡≤°‡≥Ü‡≤ó‡≤≥‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≤≤‡≥ç‡≤≤‡≤ø ‡≤∞‡≤Ç‡≤ß‡≥ç‡≤∞‡≤ó‡≤≥‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤π‡≤æ‡≤®‡≤ø",
            "‡≤ó‡≤ø‡≤° ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤ï‡≥Ü‡≤ü‡≥ç‡≤ü ‡≤µ‡≤æ‡≤∏‡≤®‡≥Ü", "‡≤π‡≥Ç‡≤µ‡≥Å‡≤ó‡≤≥‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤π‡≤£‡≥ç‡≤£‡≥Å‡≤ó‡≤≥‡≥Å ‡≤â‡≤¶‡≥Å‡≤∞‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤á‡≤≥‡≥Å‡≤µ‡≤∞‡≤ø / ‡≤∏‡≤£‡≥ç‡≤£ ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞‡≤¶ ‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®",
            "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤â‡≤¶‡≥Å‡≤∞‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤ï‡≤æ‡≤Ç‡≤° ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤ï‡≤æ‡≤Ø‡≤ø‡≤ó‡≤≥ ‡≤¨‡≤£‡≥ç‡≤£ ‡≤¨‡≤¶‡≤≤‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å"
        ];

        const grid = document.getElementById('sympGrid');
        symptomsList.forEach(s => {
            grid.innerHTML += `<label class="symp-item"><input type="checkbox" class="sc" value="${s}"> ${s}</label>`;
        });

        let globalCity = "‡≤∏‡≥ç‡≤•‡≤≥ ‡≤§‡≤ø‡≤≥‡≤ø‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤";

        async function getLocationData() {
            if (!navigator.geolocation) return alert("‡≤®‡≤ø‡≤Æ‡≥ç‡≤Æ ‡≤¨‡≥ç‡≤∞‡≥å‡≤∏‡≤∞‡≥ç GPS ‡≤¨‡≥Ü‡≤Ç‡≤¨‡≤≤‡≤ø‡≤∏‡≥Å‡≤µ‡≥Å‡≤¶‡≤ø‡≤≤‡≥ç‡≤≤");
            navigator.geolocation.getCurrentPosition(async (p) => {
                const { latitude: lat, longitude: lon } = p.coords;
                try {
                    const wRes = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${lat}&longitude=${lon}&current_weather=true`);
                    const wData = await wRes.json();
                    document.getElementById('tempTxt').innerText = Math.round(wData.current_weather.temperature) + "¬∞C";
                    document.getElementById('condTxt').innerText = "‡≤∏‡≤Ç‡≤™‡≤∞‡≥ç‡≤ï ‡≤∏‡≤ï‡≥ç‡≤∞‡≤ø‡≤Ø‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü";

                    const gRes = await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${lat}&lon=${lon}`);
                    const gData = await gRes.json();
                    globalCity = gData.address.city || gData.address.village || gData.address.state || "‡≤ó‡≥ä‡≤§‡≥ç‡≤§‡≥Å‡≤™‡≤°‡≤ø‡≤∏‡≤ø‡≤¶ ‡≤™‡≥ç‡≤∞‡≤¶‡≥á‡≤∂";
                    document.getElementById('cityTxt').innerText = "üìç " + globalCity;
                } catch (e) { alert("‡≤Æ‡≤æ‡≤π‡≤ø‡≤§‡≤ø ‡≤™‡≤°‡≥Ü‡≤Ø‡≤≤‡≥Å ‡≤µ‡≤ø‡≤´‡≤≤‡≤µ‡≤æ‡≤ó‡≤ø‡≤¶‡≥Ü. ‡≤á‡≤Ç‡≤ü‡≤∞‡≥ç‡≤®‡≥Ü‡≤ü‡≥ç ‡≤™‡≤∞‡≤ø‡≤∂‡≥Ä‡≤≤‡≤ø‡≤∏‡≤ø."); }
            });
        }

        const db = {
            rice: [
                { name: "‡≤¨‡≥Ü‡≤Ç‡≤ï‡≤ø ‡≤∞‡≥ã‡≤ó (Leaf Blast)", symptoms: ["‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤π‡≤≥‡≤¶‡≤ø‡≤Ø‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≤Ç‡≤¶‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤ï‡≤™‡≥ç‡≤™‡≥Å ‡≤ö‡≥Å‡≤ï‡≥ç‡≤ï‡≥Ü‡≤ó‡≤≥‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤§‡≥Å‡≤¶‡≤ø ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤Ö‡≤Ç‡≤ö‡≥Å ‡≤í‡≤£‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤á‡≤≥‡≥Å‡≤µ‡≤∞‡≤ø / ‡≤∏‡≤£‡≥ç‡≤£ ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞‡≤¶ ‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®"], solutions: ["‡≤∏‡≥ã‡≤Ç‡≤ï‡≤ø‡≤§ ‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≤ï‡≥ç‡≤∑‡≤£ ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤¶‡≥Å‡≤π‡≤æ‡≤ï‡≤ø", "‡≤™‡≥ç‡≤∞‡≤§‡≤ø 10 ‡≤¶‡≤ø‡≤®‡≤ó‡≤≥‡≤ø‡≤ó‡≥ä‡≤Æ‡≥ç‡≤Æ‡≥Ü ‡≤ü‡≥ç‡≤∞‡≥à‡≤∏‡≥à‡≤ï‡≥ç‡≤≤‡≤æ‡≤ú‡≥ã‡≤≤‡≥ç ‡≤∏‡≤ø‡≤Ç‡≤™‡≤°‡≤ø‡≤∏‡≤ø", "‡≤ó‡≤ø‡≤°‡≤ó‡≤≥ ‡≤®‡≤°‡≥Å‡≤µ‡≥Ü ‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤Ö‡≤Ç‡≤§‡≤∞‡≤µ‡≤ø‡≤∞‡≤≤‡≤ø", "‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø‡≤ï‡≤∞ ‡≤¨‡≥Ä‡≤ú‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤≥‡≤∏‡≤ø"], advice: { summer: "‡≤®‡≤ø‡≤Ø‡≤Æ‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤®‡≥Ä‡≤∞‡≥Å ‡≤π‡≤æ‡≤Ø‡≤ø‡≤∏‡≤ø; ‡≤ó‡≤¶‡≥ç‡≤¶‡≥Ü ‡≤™‡≥Ç‡≤∞‡≥ç‡≤§‡≤ø ‡≤í‡≤£‡≤ó‡≤¶‡≤Ç‡≤§‡≥Ü ‡≤®‡≥ã‡≤°‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤ø", monsoon: "‡≤®‡≥Ä‡≤∞‡≥Å ‡≤®‡≤ø‡≤≤‡≥ç‡≤≤‡≤¶‡≤Ç‡≤§‡≥Ü ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞ ‡≤µ‡≤π‡≤ø‡≤∏‡≤ø", winter: "‡≤ö‡≤≥‡≤ø‡≤Ø‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≤°‡≥Ü‡≤¶‡≥Å‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≥Å‡≤µ ‡≤§‡≤≥‡≤ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤≥‡≤∏‡≤ø" } },
                { name: "‡≤é‡≤≤‡≥Ü ‡≤¨‡≥ç‡≤≤‡≥à‡≤ü‡≥ç (Leaf Blight)", symptoms: ["‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤π‡≤≥‡≤¶‡≤ø‡≤Ø‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤∏‡≤Ç‡≤™‡≥Ç‡≤∞‡≥ç‡≤£ ‡≤ó‡≤ø‡≤° ‡≤¨‡≤æ‡≤°‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤§‡≥Å‡≤¶‡≤ø ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤Ö‡≤Ç‡≤ö‡≥Å ‡≤í‡≤£‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å"], solutions: ["‡≤∏‡≥ã‡≤Ç‡≤ï‡≤ø‡≤§ ‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø", "‡≤ï‡≤æ‡≤™‡≤∞‡≥ç ‡≤Ü‡≤ï‡≥ç‡≤∏‡≤ø‡≤ï‡≥ç‡≤≤‡≥ã‡≤∞‡≥à‡≤°‡≥ç ‡≤∏‡≤ø‡≤Ç‡≤™‡≤°‡≤ø‡≤∏‡≤ø", "‡≤ï‡≤≥‡≥Ü ‡≤Æ‡≥Å‡≤ï‡≥ç‡≤§‡≤µ‡≤æ‡≤ó‡≤ø‡≤°‡≤ø"], advice: { summer: "‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤®‡≥Ä‡≤∞‡≤æ‡≤µ‡≤∞‡≤ø ‡≤Æ‡≤æ‡≤°‡≤ø", monsoon: "‡≤®‡≥Ä‡≤∞‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≥ä‡≤∞‡≤π‡≤æ‡≤ï‡≤≤‡≥Å ‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø", winter: "‡≤®‡≤ø‡≤∞‡≥ã‡≤ß‡≤ï ‡≤§‡≤≥‡≤ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤≥‡≤∏‡≤ø" } }
            ],
            wheat: [
                { name: "‡≤§‡≥Å‡≤ï‡≥ç‡≤ï‡≥Å ‡≤∞‡≥ã‡≤ó (Rust Disease)", symptoms: ["‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≤Ç‡≤¶‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤ï‡≤™‡≥ç‡≤™‡≥Å ‡≤ö‡≥Å‡≤ï‡≥ç‡≤ï‡≥Ü‡≤ó‡≤≥‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤π‡≤≥‡≤¶‡≤ø‡≤Ø‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å"], solutions: ["‡≤™‡≥ç‡≤∞‡≥ä‡≤™‡≤ø‡≤ï‡≥ä‡≤®‡≤ú‡≥ã‡≤≤‡≥ç ‡≤∏‡≤ø‡≤Ç‡≤™‡≤°‡≤ø‡≤∏‡≤ø", "‡≤∞‡≥ã‡≤ó‡≤ó‡≥ç‡≤∞‡≤∏‡≥ç‡≤§ ‡≤ó‡≤ø‡≤°‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø", "‡≤®‡≤ø‡≤∞‡≥ã‡≤ß‡≤ï ‡≤¨‡≥Ä‡≤ú ‡≤¨‡≤≥‡≤∏‡≤ø"], advice: { summer: "‡≤≠‡≥Ç‡≤Æ‡≤ø ‡≤∏‡≤ø‡≤¶‡≥ç‡≤ß‡≤™‡≤°‡≤ø‡≤∏‡≤ø", monsoon: "‡≤®‡≥Ä‡≤∞‡≥Å ‡≤®‡≤ø‡≤≤‡≥ç‡≤≤‡≤¶‡≤Ç‡≤§‡≥Ü ‡≤®‡≥ã‡≤°‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤ø", winter: "‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤∏‡≤Æ‡≤Ø‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤¨‡≤ø‡≤§‡≥ç‡≤§‡≤®‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø" } }
            ],
            maize: [
                { name: "‡≤ï‡≤æ‡≤Ç‡≤° ‡≤ï‡≥ä‡≤≥‡≥Ü‡≤§ (Stem Rot)", symptoms: ["‡≤∏‡≤Ç‡≤™‡≥Ç‡≤∞‡≥ç‡≤£ ‡≤ó‡≤ø‡≤° ‡≤¨‡≤æ‡≤°‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤ó‡≤ø‡≤° ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤ï‡≥Ü‡≤ü‡≥ç‡≤ü ‡≤µ‡≤æ‡≤∏‡≤®‡≥Ü", "‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤á‡≤≥‡≥Å‡≤µ‡≤∞‡≤ø / ‡≤∏‡≤£‡≥ç‡≤£ ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞‡≤¶ ‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®"], solutions: ["‡≤™‡≥Ä‡≤°‡≤ø‡≤§ ‡≤ï‡≤æ‡≤Ç‡≤°‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø", "‡≤∂‡≤ø‡≤≤‡≥Ä‡≤Ç‡≤ß‡≥ç‡≤∞‡≤®‡≤æ‡≤∂‡≤ï ‡≤∏‡≤ø‡≤Ç‡≤™‡≤°‡≤ø‡≤∏‡≤ø", "‡≤®‡≥Ä‡≤∞‡≥Å ‡≤®‡≤ø‡≤≤‡≥ç‡≤≤‡≤¶‡≤Ç‡≤§‡≥Ü ‡≤®‡≥ã‡≤°‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤ø"], advice: { summer: "‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø ‡≤®‡≥Ä‡≤∞‡≥Å ‡≤®‡≥Ä‡≤°‡≤ø", monsoon: "‡≤ö‡≤∞‡≤Ç‡≤°‡≤ø ‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≥Ü ‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø‡≤∞‡≤≤‡≤ø", winter: "‡≤®‡≤ø‡≤∞‡≥ã‡≤ß‡≤ï ‡≤§‡≤≥‡≤ø ‡≤¨‡≤≥‡≤∏‡≤ø" } }
            ],
            potato: [
                { name: "‡≤Ö‡≤Ç‡≤ó‡≤Æ‡≤æ‡≤∞‡≤ø ‡≤∞‡≥ã‡≤ó (Late Blight)", symptoms: ["‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤ï‡≤Ç‡≤¶‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤ï‡≤™‡≥ç‡≤™‡≥Å ‡≤ö‡≥Å‡≤ï‡≥ç‡≤ï‡≥Ü‡≤ó‡≤≥‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥ ‡≤Æ‡≥á‡≤≤‡≥Ü ‡≤¨‡≤ø‡≤≥‡≤ø ‡≤™‡≥Å‡≤°‡≤ø ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤∂‡≤ø‡≤≤‡≥Ä‡≤Ç‡≤ß‡≥ç‡≤∞", "‡≤ï‡≥ä‡≤≥‡≥Ü‡≤§ ‡≤π‡≤£‡≥ç‡≤£‡≥Å‡≤ó‡≤≥‡≥Å / ‡≤ß‡≤æ‡≤®‡≥ç‡≤Ø‡≤ó‡≤≥‡≥Å / ‡≤ï‡≤æ‡≤Ø‡≤ø‡≤ó‡≤≥‡≥Å / ‡≤ó‡≥Ü‡≤°‡≥ç‡≤°‡≥Ü‡≤ó‡≤≥‡≥Å"], solutions: ["‡≤§‡≤ï‡≥ç‡≤∑‡≤£ ‡≤∞‡≥ã‡≤ó‡≤ó‡≥ç‡≤∞‡≤∏‡≥ç‡≤§ ‡≤ó‡≤ø‡≤°‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø", "‡≤ï‡≥ç‡≤≤‡≥ã‡≤∞‡≥ã‡≤•‡≤≤‡≥ã‡≤®‡≤ø‡≤≤‡≥ç ‡≤∏‡≤ø‡≤Ç‡≤™‡≤°‡≤ø‡≤∏‡≤ø", "‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø‡≤ï‡≤∞ ‡≤ó‡≥Ü‡≤°‡≥ç‡≤°‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤¨‡≤≥‡≤∏‡≤ø"], advice: { summer: "‡≤ó‡≥Ü‡≤°‡≥ç‡≤°‡≥Ü‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø ‡≤∏‡≤Ç‡≤ó‡≥ç‡≤∞‡≤π‡≤ø‡≤∏‡≤ø", monsoon: "‡≤®‡≥Ä‡≤∞‡≥Å ‡≤®‡≤ø‡≤≤‡≥ç‡≤≤‡≤¶‡≤Ç‡≤§‡≥Ü ‡≤é‡≤ö‡≥ç‡≤ö‡≤∞ ‡≤µ‡≤π‡≤ø‡≤∏‡≤ø", winter: "‡≤®‡≤ø‡≤Ø‡≤Æ‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≤ø ‡≤§‡≤™‡≤æ‡≤∏‡≤£‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø" } }
            ],
            tomato: [
                { name: "‡≤é‡≤≤‡≥Ü ‡≤Æ‡≥Å‡≤¶‡≥Å‡≤°‡≥Å ‡≤∞‡≥ã‡≤ó (Leaf Curl)", symptoms: ["‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤Æ‡≥Å‡≤¶‡≥Å‡≤°‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤∏‡≥Å‡≤∞‡≥Å‡≤≥‡≤ø‡≤Ø‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤é‡≤≤‡≥Ü‡≤ó‡≤≥‡≥Å ‡≤π‡≤≥‡≤¶‡≤ø‡≤Ø‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å", "‡≤¨‡≥Ü‡≤≥‡≤µ‡≤£‡≤ø‡≤ó‡≥Ü ‡≤ï‡≥Å‡≤Ç‡≤†‡≤ø‡≤§‡≤µ‡≤æ‡≤ó‡≥Å‡≤µ‡≥Å‡≤¶‡≥Å"], solutions: ["‡≤∏‡≥ã‡≤Ç‡≤ï‡≤ø‡≤§ ‡≤ó‡≤ø‡≤°‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø", "‡≤¨‡≤ø‡≤≥‡≤ø ‡≤®‡≥ä‡≤£‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤®‡≤ø‡≤Ø‡≤Ç‡≤§‡≥ç‡≤∞‡≤ø‡≤∏‡≤≤‡≥Å ‡≤ï‡≥Ä‡≤ü‡≤®‡≤æ‡≤∂‡≤ï ‡≤¨‡≤≥‡≤∏‡≤ø", "‡≤Ü‡≤∞‡≥ã‡≤ó‡≥ç‡≤Ø‡≤ï‡≤∞ ‡≤∏‡≤∏‡≤ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤ö‡≥ç‡≤ö‡≤ø"], advice: { summer: "‡≤®‡≥Ü‡≤∞‡≤≥‡≤ø‡≤® ‡≤µ‡≥ç‡≤Ø‡≤µ‡≤∏‡≥ç‡≤•‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø", monsoon: "‡≤®‡≥Ä‡≤∞‡≥Å ‡≤π‡≤∞‡≤ø‡≤¶‡≥Å‡≤π‡≥ã‡≤ó‡≥Å‡≤µ‡≤Ç‡≤§‡≥Ü ‡≤Æ‡≤æ‡≤°‡≤ø", winter: "‡≤π‡≤ø‡≤Æ‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤∞‡≤ï‡≥ç‡≤∑‡≤ø‡≤∏‡≤ø" } }
            ],
            cotton: [
                { name: "‡≤ï‡≤æ‡≤Ø‡≤ø ‡≤ï‡≥ä‡≤≥‡≥Ü‡≤§ (Boll Rot)", symptoms: ["‡≤ï‡≥ä‡≤≥‡≥Ü‡≤§ ‡≤π‡≤£‡≥ç‡≤£‡≥Å‡≤ó‡≤≥‡≥Å / ‡≤ß‡≤æ‡≤®‡≥ç‡≤Ø‡≤ó‡≤≥‡≥Å / ‡≤ï‡≤æ‡≤Ø‡≤ø‡≤ó‡≤≥‡≥Å / ‡≤ó‡≥Ü‡≤°‡≥ç‡≤°‡≥Ü‡≤ó‡≤≥‡≥Å", "‡≤ó‡≤ø‡≤° ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤ï‡≥Ü‡≤ü‡≥ç‡≤ü ‡≤µ‡≤æ‡≤∏‡≤®‡≥Ü", "‡≤ï‡≤°‡≤ø‡≤Æ‡≥Ü ‡≤á‡≤≥‡≥Å‡≤µ‡≤∞‡≤ø / ‡≤∏‡≤£‡≥ç‡≤£ ‡≤ó‡≤æ‡≤§‡≥ç‡≤∞‡≤¶ ‡≤â‡≤§‡≥ç‡≤™‡≤®‡≥ç‡≤®"], solutions: ["‡≤™‡≥Ä‡≤°‡≤ø‡≤§ ‡≤ï‡≤æ‡≤Ø‡≤ø‡≤ó‡≤≥‡≤®‡≥ç‡≤®‡≥Å ‡≤§‡≤ï‡≥ç‡≤∑‡≤£ ‡≤§‡≥Ü‡≤ó‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø", "‡≤ï‡≤æ‡≤∞‡≥ç‡≤¨‡≥Ü‡≤Ç‡≤°‡≤ú‡≤ø‡≤Æ‡≥ç ‡≤∏‡≤ø‡≤Ç‡≤™‡≤°‡≤ø‡≤∏‡≤ø"], advice: { summer: "‡≤®‡≥Ä‡≤∞‡≤æ‡≤µ‡≤∞‡≤ø ‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤ó‡≤ø‡≤∞‡≤≤‡≤ø", monsoon: "‡≤Ö‡≤Ç‡≤§‡≤∞ ‡≤ï‡≤æ‡≤™‡≤æ‡≤°‡≤ø‡≤ï‡≥ä‡≤≥‡≥ç‡≤≥‡≤ø", winter: "‡≤∏‡≤∞‡≤ø‡≤Ø‡≤æ‡≤¶ ‡≤∏‡≤Æ‡≤Ø‡≤¶‡≤≤‡≥ç‡≤≤‡≤ø ‡≤ï‡≤ü‡≤æ‡≤µ‡≥Å ‡≤Æ‡≤æ‡≤°‡≤ø" } }
            ]
        };

        function runDiagnosis() {
            const crop = document.getElementById('cropSelect').value;
            const selected = Array.from(document.querySelectorAll('.sc:checked')).map(i => i.value);
            if (selected.length === 0) return alert("‡≤¶‡≤Ø‡≤µ‡≤ø‡≤ü‡≥ç‡≤ü‡≥Å ‡≤ï‡≤®‡≤ø‡≤∑‡≥ç‡≤† ‡≤í‡≤Ç‡≤¶‡≥Å ‡≤≤‡≤ï‡≥ç‡≤∑‡≤£‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤Ü‡≤∞‡≤ø‡≤∏‡≤ø.");

            const month = new Date().getMonth();
            const season = (month >= 2 && month <= 5) ? "summer" : (month >= 6 && month <= 9) ? "monsoon" : "winter";

            let bestMatch = null;
            let maxScore = 0;

            (db[crop] || []).forEach(d => {
                let score = d.symptoms.filter(s => selected.includes(s)).length;
                if (score > maxScore) {
                    maxScore = score;
                    bestMatch = d;
                }
            });

            const resDiv = document.getElementById('result');
            resDiv.style.display = "block";

            if (bestMatch && maxScore >= 1) {
                document.getElementById('resTitle').innerText = "‡≤∏‡≤Ç‡≤≠‡≤µ‡≤®‡≥Ä‡≤Ø ‡≤∞‡≥ã‡≤ó: " + bestMatch.name;
                document.getElementById('resMeta').innerText = `‡≤™‡≥ç‡≤∞‡≤¶‡≥á‡≤∂: ${globalCity} | ‡≤™‡≥ç‡≤∞‡≤∏‡≥ç‡≤§‡≥Å‡≤§ ‡≤ï‡≤æ‡≤≤: ${season === 'summer' ? '‡≤¨‡≥á‡≤∏‡≤ø‡≤ó‡≥Ü' : season === 'monsoon' ? '‡≤Æ‡≤≥‡≥Ü‡≤ó‡≤æ‡≤≤' : '‡≤ö‡≤≥‡≤ø‡≤ó‡≤æ‡≤≤'}`;

                const solUl = document.getElementById('resSols');
                solUl.innerHTML = "";
                bestMatch.solutions.forEach(s => solUl.innerHTML += `<li>${s}</li>`);
                document.getElementById('resAdv').innerText = bestMatch.advice[season];
            } else {
                document.getElementById('resTitle').innerText = "‡≤∏‡≥ç‡≤™‡≤∑‡≥ç‡≤ü‡≤µ‡≤æ‡≤ó‡≤ø ‡≤™‡≤§‡≥ç‡≤§‡≥Ü‡≤Ø‡≤æ‡≤ó‡≤ø‡≤≤‡≥ç‡≤≤";
                document.getElementById('resMeta').innerText = "‡≤®‡≥Ä‡≤µ‡≥Å ‡≤Ü‡≤∞‡≤ø‡≤∏‡≤ø‡≤¶ ‡≤≤‡≤ï‡≥ç‡≤∑‡≤£‡≤ó‡≤≥‡≥Å ‡≤Ø‡≤æ‡≤µ‡≥Å‡≤¶‡≥á ‡≤®‡≤ø‡≤∞‡≥ç‡≤¶‡≤ø‡≤∑‡≥ç‡≤ü ‡≤∞‡≥ã‡≤ó‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤π‡≥ä‡≤Ç‡≤¶‡≤ø‡≤ï‡≥Ü‡≤Ø‡≤æ‡≤ó‡≥Å‡≤§‡≥ç‡≤§‡≤ø‡≤≤‡≥ç‡≤≤.";
                document.getElementById('resSols').innerHTML = "<li>‡≤ó‡≤ø‡≤°‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤π‡≤§‡≥ç‡≤§‡≤ø‡≤∞‡≤¶‡≤ø‡≤Ç‡≤¶ ‡≤ó‡≤Æ‡≤®‡≤ø‡≤∏‡≤ø.</li><li>‡≤ï‡≥Ä‡≤ü‡≤ó‡≤≥‡≤ø‡≤µ‡≥Ü‡≤Ø‡≥á ‡≤Ö‡≤•‡≤µ‡≤æ ‡≤®‡≥Ä‡≤∞‡≤ø‡≤® ‡≤ï‡≥ä‡≤∞‡≤§‡≥Ü‡≤Ø‡≤ø‡≤¶‡≥Ü‡≤Ø‡≥á ‡≤®‡≥ã‡≤°‡≤ø.</li><li>‡≤ï‡≥É‡≤∑‡≤ø ‡≤§‡≤ú‡≥ç‡≤û‡≤∞ ‡≤∏‡≤≤‡≤π‡≥Ü ‡≤™‡≤°‡≥Ü‡≤Ø‡≤ø‡≤∞‡≤ø.</li>";
                document.getElementById('resAdv').innerText = "‡≤∏‡≤æ‡≤Æ‡≤æ‡≤®‡≥ç‡≤Ø ‡≤∏‡≤≤‡≤π‡≥Ü: ‡≤π‡≥ä‡≤≤‡≤µ‡≤®‡≥ç‡≤®‡≥Å ‡≤∏‡≥ç‡≤µ‡≤ö‡≥ç‡≤õ‡≤µ‡≤æ‡≤ó‡≤ø‡≤°‡≤ø ‡≤Æ‡≤§‡≥ç‡≤§‡≥Å ‡≤π‡≤µ‡≤æ‡≤Æ‡≤æ‡≤®‡≤ï‡≥ç‡≤ï‡≥Ü ‡≤§‡≤ï‡≥ç‡≤ï‡≤Ç‡≤§‡≥Ü ‡≤®‡≥Ä‡≤∞‡≥Å ‡≤π‡≤æ‡≤Ø‡≤ø‡≤∏‡≤ø.";
            }
            resDiv.scrollIntoView({ behavior: 'smooth' });
        }
    </script>
</body>

</html>